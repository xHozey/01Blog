<article class="comment-card">
  <!-- Header -->
  <header class="comment-header">
    <div class="author-section">
      <span class="comment-author" (click)="goToProfile()">{{ comment.author }}</span>
      <span class="comment-time">{{ comment.createdAt | date: 'short' }}</span>
    </div>
    
    <!-- Dropdown Menu -->
    <div class="dropdown">
      <button 
        class="comment-menu-btn" 
        type="button" 
        id="commentOptionsBtn" 
        data-bs-toggle="dropdown"
        aria-expanded="false">
        <lucide-icon [img]="EllipsisIcon" size="18"></lucide-icon>
      </button>
      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="commentOptionsBtn">
        @if (user?.id === comment.authorId) {
          <li>
            <button class="dropdown-item text-danger" (click)="delete.emit(comment.id)">
              <i class="fa fa-trash me-2"></i>Delete
            </button>
          </li>
          <li><hr class="dropdown-divider"></li>
        }
        <li>
          <button class="dropdown-item" (click)="report.emit(comment.id)">
            <i class="fa fa-flag me-2"></i>Report
          </button>
        </li>
      </ul>
    </div>
  </header>

  <!-- Content -->
  <p class="comment-content">{{ comment.content }}</p>

  <!-- Media
  @if (comment.filePath) {
    <div class="comment-media">
      @if (comment.filePath.toLowerCase().endsWith('.jpg') ||
            comment.filePath.toLowerCase().endsWith('.jpeg') ||
            comment.filePath.toLowerCase().endsWith('.png') ||
            comment.filePath.toLowerCase().endsWith('.gif') ||
            comment.filePath.toLowerCase().endsWith('.webp')) {
        <img [src]="comment.filePath" alt="Comment attachment" />
      }
      @if (comment.filePath.toLowerCase().endsWith('.mp4') ||
            comment.filePath.toLowerCase().endsWith('.webm') ||
            comment.filePath.toLowerCase().endsWith('.ogg')) {
        <video controls class="comment-media">
          <source [src]="comment.filePath" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
      }
    </div>
  } -->

  <!-- Like Button -->
  <div class="like-action">
    <button 
      (click)="toggleLike()" 
      class="like-btn"
      [ngClass]="comment.isLiked ? 'liked' : ''">
      <lucide-icon [img]="HeartIcon" size="15"></lucide-icon>
      <span class="like-count">{{ comment.likes }}</span>
    </button>
  </div>
</article>