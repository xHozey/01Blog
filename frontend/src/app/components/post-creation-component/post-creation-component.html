<div class="card shadow-sm border border-info-subtle rounded-3 mb-4">

  <!-- Minimal Input -->
  @if (!expandForm) {
  <div (click)="expandForm = true"
    class="form-control bg-light text-muted border-info-subtle rounded-3 cursor-pointer py-3 px-3">
    What's on your mind?
  </div>
  }

  <!-- Expanded Form -->
  @if (expandForm) {
  <div class="card-body">

    <!-- Title Input -->
    <input type="text" class="form-control mb-3" placeholder="Post title (optional)" [(ngModel)]="title" />

    <!-- Content Textarea -->
    <textarea rows="4" class="form-control mb-3" placeholder="Write something..." [(ngModel)]="content" autofocus>
      </textarea>

    <!-- File Preview -->
    @if (previewUrl) {
    <div class="position-relative mb-3">
      @if (selectedFile?.type?.startsWith('image/')) {
      <img [src]="previewUrl" alt="Preview" class="img-fluid rounded border border-info-subtle" />
      }
      @if (selectedFile?.type?.startsWith('video/')) {
      <video [src]="previewUrl" controls class="w-100 rounded border border-info-subtle"></video>
      }

      <button (click)="removeFile()" type="button"
        class="btn btn-sm btn-danger rounded-circle position-absolute top-0 end-0 m-2">
        âœ•
      </button>
    </div>
    }

    <!-- Action Buttons -->
    <div class="d-flex justify-content-between align-items-center">

      <!-- File Upload Buttons -->
      <div class="btn-group">
        <button type="button" class="btn btn-outline-info btn-sm" (click)="fileInputRef.click()">
          <lucide-icon [img]="ImageIcon"></lucide-icon>
        </button>
        <button type="button" class="btn btn-outline-info btn-sm" (click)="fileInputRef.click()">
          <lucide-icon [img]="VideoIcon"></lucide-icon>

        </button>
        <input #fileInputRef type="file" accept="image/*,video/*" (change)="onFileSelect($event)" hidden />
      </div>

      <!-- Cancel & Submit -->
      <div class="btn-group">
        <button type="button" class="btn btn-light btn-sm" (click)="handleCancel()">
          Cancel
        </button>
        <button type="button" class="btn btn-info btn-sm text-white" [disabled]="!content.trim()"
          (click)="handleSubmit()">
          <lucide-icon [img]="SendIcon"></lucide-icon>

        </button>
      </div>

    </div>
  </div>
  }
</div>